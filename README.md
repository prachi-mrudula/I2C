# Design of inter integrated circuit (I2C) in 0.6um CMOS

# Abstract
This article describes the detailed design and implementation of I2C slave circuitry for write and read operations from a latch unit, implemented in a 0.6μm CMOS technology. For the purpose of demonstration, the I2C circuit was designed and fabricated in 0.6µm CMOS technology.

# Introduction
An I2C protocol is one of the serial communication protocols that are used for chip to chip communication. Similar to the I2C protocol, SPI and UART are also used for chip to chip communication. The I2C is the short form of Inter-Integrated Circuit, a type of bus, which was designed and developed by Philips in 1980 for inter-chip communication. I2C is adopted by a lot of vendor companies for the chip to chip communication.

Features of I2C protocol:
- In I2C only two buses are required for the communication, the serial data bus (SDA) and serial clock bus (SCL). 
- Each component in I2C bus is software addressable by a unique address, this unique address is used by the master to communicate with a particular slave. 
- Always a master and slave relationships exist at all times in I2C. 
- In I2C, communication is started by the master. 
- The master can send data to a slave or receive data from a slave - slaves do not transfer data between themselves.
- I2C is the 8-bit oriented serial bidirectional communication, there are following speed mode in I2C.

|  MODE            | SPEED         |
|------------------|---------------|
| Standard-mode    | 100 Kbit/s    |   
| Fast-mode        | 400 Kbit/s    |
| Fast-mode Plus   | 1 Mbit/s      |
| High-speed mode  | 3.4 Mbit/s    |

Table 1: I2C Speed Modes

## Circuit Design

This design describes a simple circuitry which writes data in a data latch and reads the same data through I2C Fast-mode Plus protocol. The design contains a start-stop circuit, 8 bit shift register, 5 bit up counter, enable controller circuit, comparator circuit and address and data latch circuits. Start-stop circuit can detect the start and stop condition from the SDA and SCL signals. Shift registers are used to transmit and receive the address and data for write and read operations respectively. Different controlling signals were generated by the help of a comparator circuit which takes inputs from counter outputs. Minimum 18th count state was needed to detect stop condition given by the master; hence a mod-18 synchronous up counter was designed. The enable controller circuit was used to achieve bidirectional nature of SDA wire by tri-stating the output of the shift register with the input of PAD BBC1P. Three latch circuits: Address latch, data latch and R/W latch were designed to store slave address, data and R/WB bit sent by master. These circuits are designed and simulated in cadence virtuoso. This article describes the design of I2C accessible latch implemented in a 0.6μm CMOS technology.

<img title="Master Slave Configuration" src="images/Master_Slave.jpg"> 

## Write Operation

In the case of a “write” operation, the R/WB bit is kept low. In this operation, the master circuit is supposed to send the data bits along with the address bits. Hence, after the address bits are received and latched into the address latch circuit, the following data bits move into the first set of (SIPO) shift-registers. From this set of shift registers, the data is sent into the data latch and with help of “en_data”, the data is latched into the data latch circuit.


<img title="Write Timing Diagram" src="images/TD_Write.jpg" width="900" length="900"> 

## Read Operation

In case of a read operation, the R/WB bit is kept high. With the help of the mux_en signal, the second set of (PISO) shift registers are activated in case of read operation, as soon as the R/WB bit is received. The second set of shift registers receive data bits from the data latch and with each clock cycle, shift the data bits into the “SDA_OUT” line. The “SDA_OUT” is subsequently, with help of the “Enable Controller” circuit and the PAD, tri-stated into the SDA signal.

<img title="Read Timing Diagram" src="images/TD_Read.jpg" width="900" length="900"> 

## The start and stop circuit

For the start condition to occur, the SDA needs to be pulled low while the SCL remains high. As mentioned earlier, the time period of SCL is 1 micron while that of SDA is 2 micron. In this case, the Vbit source for SCL is given a delay of 1.5 microns. The Vbit for SDA is given as 1 micron. This makes it possible for the SDA to be pulled low while SCL remains high as shown in Figure II.2. An additional delay of 16 ns is given so that the SDA bits change while the SCL remains low, i.e. a low level triggered operation.

<img title="The start and stop circuit" src="images/Start_Stop.jpg" width="900" length="900"> 

